/*
*********************************************************************************************************
*
*                                     BOARD SUPPORT PACKAGE (BSP)
*
* Filename      : BSP_TIMER.h
* Version       : V1.00
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                                                MODULE
*********************************************************************************************************
*/

#ifndef _BSP_TIMER_H
#define _BSP_TIMER_H

/*
*********************************************************************************************************
*                                             INCLUDE FILES
*********************************************************************************************************
*/

#include "sys.h"

/*
*********************************************************************************************************
*                                            	Para DEFINES
*********************************************************************************************************
*/

#define		Pulse_Freq  	1000														//脉冲充电频率
#define		TIM3_psc			27															//TIM3时钟基准频率108M/27=4M
#define		Simple_Accu		100															//一个脉冲周期采样20个点
#define		TIM3_arr			108000000/TIM3_psc/(Pulse_Freq*Simple_Accu)   	//定时器中断周期始终是脉冲频率的20倍
//#define		TIM3_Freq			108000000/TIM3_psc/TIM3_arr								//TIM3中断频率
#define		TIM3_Freq			100000.0f							//TIM3中断频率

#define		TIM4_psc			108															//TIM4时钟基准频率108M/108=1M
#define		TIM4_arr			10000   													//定时器计数10000
#define		TIM4_Freq			108000000/TIM3_psc/TIM3_arr			//TIM4中断频率

#define		TIM2_psc			10800															//TIM4时钟基准频率108M/10800=10k
#define		TIM2_arr			100000   													//定时器计数10s


/*
*********************************************************************************************************
*                                            EXTERN
*********************************************************************************************************
*/

extern TIM_HandleTypeDef TIM2_Handler,TIM3_Handler,TIM4_Handler;      //定时器句柄 

/*
*********************************************************************************************************
*                                              SERVICES
*********************************************************************************************************
*/

void TIM3_Init(u16 arr,u16 psc);    //定时器初始化
void TIM4_Init(u16 arr,u16 psc);    //定时器初始化
void TIM2_Init(u32 arr,u16 psc);		//定时器初始化

#endif

